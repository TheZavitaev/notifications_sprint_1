[![wemake-python-styleguide](https://img.shields.io/badge/style-wemake-000000.svg)](https://github.com/wemake-services/wemake-python-styleguide)
[![workflow](https://github.com/medik88/ugc_sprint_2/workflows/ugc_deploy/badge.svg)](https://github.com/TheZavitaev/notifications_sprint_1/actions)
[![Imports: isort](https://img.shields.io/badge/%20imports-isort-%231674b1?style=flat&labelColor=ef8336)](https://pycqa.github.io/isort/)


# Проектная работа 10 спринта
Сервис для отправки уведомлений.

## Система состоит из следующих элементов:

### Ядро системы - это админка. 

Контент-менеджер создает HTML-шаблон, присваивает ему тип рассылки и способ отправки. 
После этого контент-менеджер создает "задание". 

В задании необходимо указать тип рассылки, планируемое время отправки и т.д. Более того, в задание можно передать 
контекст для рассылки: идентификаторы пользователей, группы пользователей, идентификаторы фильмов и т.д. 

Шаблоны и задания хранятся в Postgres.

### API - единая точка входа.

Если просто, то АПИшка принимает запросы по сети от всех "продюсеров", и перекладывает их RabbitMQ.

### Scheduler - спусковой крючек для массовых рассылок.

Шедулер пулит БД админки на предмет новых заданий, и бросает запрос в АПИ в указанное менеджерами время.

### Worker - несчастный разгребатель.

Воркер пулит очередь на предмет появления новых ивентов для отправки, ходит в различные места кинотеатра для рендеринга 
готовых писем. Из БД админки забирает HTML-код шаблона, из movie-api должен достать контекст о фильме, из UGC - 
персонифицированную информацию по ID. 

После этого пушит данные в сендера.

### Sender - клиент для работы с чужими API.

Сендер работает с чужими АПИ (mailgun, mailchimp, twilio etc). 

## Схематично это можно представить следующим образом

![schema_api](/Users/ozavitaev/dev/MPD/notifications_sprint_1/doc/schema_api.png)